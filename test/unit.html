<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Isepic Chess - Unit Tests</title>
		<link rel="stylesheet" href="../css/default.css">
		<script src="../js/jquery-3.3.1.min.js"></script>
		<script src="../js/isepic-chess.js"></script>
		<script src="./test-utility-functions.js"></script>
		<script src="./test-ic-functions.js"></script>
		<script src="./test-other.js"></script>
		<script>
			function formatResult(obj){
				var tr_html;
				
				tr_html="<tr class='"+(obj.passed ? "success_box" : "danger_box")+"'>";
				tr_html+="<td><pre>"+obj.testName+"</pre></td>";
				tr_html+="<td><em>"+obj.fromFile+"</em></td>";
				tr_html+="<td>"+obj.result+"</td>";
				tr_html+="<td class='elapsed_time'>"+obj.elapsedTime+"</td>";
				tr_html+="<td>"+(obj.passed ? "✓" : "×")+"</td>";
				tr_html+="</tr>";
				
				return tr_html;
			}
			
			function updateElapsedTime(){
				var total;
				
				total=0;
				
				$(".elapsed_time").each(function(index){
					total+=($(this).html().split(" ")[0]*1 || 0);
				});
				
				$("#total_time").html("Total elapsed time: "+total+" ms");
			}
			
			$(function(){
				var tests_html;
				
				tests_html="<div id='xchessboard' class='tests'><h3 class='inlineb'>Isepic-Chess.js » Unit Tests <a href='https://github.com/ajax333221/Isepic-Chess'>View on GitHub</a></h3>";
				tests_html+="<table cellpadding='0' cellspacing='0'>";
				tests_html+="<tr>";
				tests_html+="<th>Test Name</th>";
				tests_html+="<th>From</th>";
				tests_html+="<th>Result</th>";
				tests_html+="<th>Elapsed time</th>";
				tests_html+="<th>Passed?</th>";
				tests_html+="</tr>";
				
				//test-utility-functions.js
				tests_html+=formatResult(fnIcUtilityTrimSpaces());
				tests_html+=formatResult(fnIcUtilityFormatName());
				tests_html+=formatResult(fnIcUtilityStrContains());
				tests_html+=formatResult(fnIcUtilityOccurrences());
				tests_html+=formatResult(fnIcUtilityToInt());
				tests_html+=formatResult(fnIcUtilityHashCode());
				tests_html+=formatResult(fnIcUtilityCastlingChars());
				//_cloneBoardObjs(): [test-other.js > testUtilityMisc()]
				//_getBoardTabsHTML(): [N/A]
				//_getTableHTML(): [N/A]
				tests_html+=formatResult(fnIcUtilityBasicFenTest());
				
				//test-ic-functions.js
				tests_html+=formatResult(fnIcToVal());
				tests_html+=formatResult(fnIcToAbsVal());
				tests_html+=formatResult(fnIcToBal());
				tests_html+=formatResult(fnIcToAbsBal());
				tests_html+=formatResult(fnIcToPieceClass());
				tests_html+=formatResult(fnIcToBos());
				tests_html+=formatResult(fnIcToPos());
				tests_html+=formatResult(fnIcGetSign());
				tests_html+=formatResult(fnIcGetRankPos());
				tests_html+=formatResult(fnIcGetFilePos());
				tests_html+=formatResult(fnIcGetRankBos());
				tests_html+=formatResult(fnIcGetFileBos());
				
				//test-other.js
				tests_html+=formatResult(testDisambiguation());
				tests_html+=formatResult(testBasicFunctionality());
				tests_html+=formatResult(testFenPositions());
				tests_html+=formatResult(testUtilityMisc());
				
				tests_html+="</table><pre id='total_time'>...</pre></div>";
				$("body").html(tests_html);
				
				updateElapsedTime();
			});
		</script>
	</head>
	<body>
	</body>
</html>
